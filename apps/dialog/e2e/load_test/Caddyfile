{
        # Global options
        http_port 80
        https_port 443
}

vidis-mock.dgpt.app {
        # Caddy will automatically obtain and manage SSL certificates
        # No need for additional SSL configuration - it's automatic!

        reverse_proxy {
                lb_policy cookie cookie_name=VIDISSESSION
                lb_try_duration 5s


                # All 50 instances
                to 127.0.0.1:9000 127.0.0.1:9001 127.0.0.1:9002 127.0.0.1:9003 127.0.0.1:9004 127.0.0.1:9005 127.0.0.1:9006 127.0.0.1:9007 127.0.0.1:9008 127.0.0.1:9009 127.0.0.1:9010 127.0.0.1:9011 127.0.0.1:9012 127.0.0.1:9013 127.0.0.1:9014 127.0.0.1:9015 127.0.0.1:9016 127.0.0.1:9017 127.0.0.1:9018 127.0.0.1:9019 127.0.0.1:9020 127.0.0.1:9021 127.0.0.1:9022 127.0.0.1:9023 127.0.0.1:9024 127.0.0.1:9025 127.0.0.1:9026 127.0.0.1:9027 127.0.0.1:9028 127.0.0.1:9029 127.0.0.1:9030 127.0.0.1:9031 127.0.0.1:9032 127.0.0.1:9033 127.0.0.1:9034 127.0.0.1:9035 127.0.0.1:9036 127.0.0.1:9037 127.0.0.1:9038 127.0.0.1:9039 127.0.0.1:9040 127.0.0.1:9041 127.0.0.1:9042 127.0.0.1:9043 127.0.0.1:9044 127.0.0.1:9045 127.0.0.1:9046 127.0.0.1:9047 127.0.0.1:9048 127.0.0.1:9049
        }

        log {
                output file /var/log/caddy/access.log
                format json
        }
}
